FC = gfortran

flags_gfortran = -std=f2003 -pedantic -Wall -Wno-maybe-uninitialized
flags_ifort = -O0 -stand f03 -warn all

FFLAGS = ${flags_$(FC)}

critical: LDLIBS = -llapack -lblas

needless = .DS_Store ebmb.pyc manual/ebmb.aux manual/.ebmb.lb manual/ebmb.log manual/ebmb.out manual/ebmb.synctex.gz ~temporary.dat

# generated by makemake90 mod=modules:

modules_gfortran = -Jmodules
modules_ifort = -module modules

override FFLAGS += ${modules_$(FC)}

needless += src/critical.o src/dos.o src/ebmb.o src/eigenvalues.o src/eliashberg/eigenvalue.o src/eliashberg/eigenvalue_cdos.o src/eliashberg/self_energy.o src/eliashberg/self_energy_cdos.o src/eliashberg/spectral_function.o src/formatting.o src/global.o src/io/load.o src/io/store.o src/io/tell.o src/pade.o src/real_axis.o src/tc.o src/tools.o modules/*.mod

programs = critical ebmb tc

.PHONY: all clean cleaner

all: $(programs)

clean:
	rm -f $(needless)

cleaner: clean
	rm -f $(programs)

$(programs):
	$(FC) $(FFLAGS) -o $@ $^ $(LDLIBS)

%.o: %.f90
	$(FC) $(FFLAGS) -c $< -o $@

critical: src/critical.o src/eigenvalues.o src/eliashberg/eigenvalue.o src/eliashberg/eigenvalue_cdos.o src/eliashberg/self_energy.o src/eliashberg/spectral_function.o src/global.o src/io/load.o src/tools.o
ebmb: src/dos.o src/ebmb.o src/eliashberg/self_energy.o src/eliashberg/self_energy_cdos.o src/eliashberg/spectral_function.o src/formatting.o src/global.o src/io/load.o src/io/store.o src/io/tell.o src/pade.o src/real_axis.o src/tools.o
tc: src/eliashberg/self_energy.o src/eliashberg/self_energy_cdos.o src/eliashberg/spectral_function.o src/formatting.o src/global.o src/io/load.o src/tc.o src/tools.o

src/critical.o: src/eliashberg/eigenvalue.o src/eliashberg/eigenvalue_cdos.o src/global.o src/io/load.o
src/dos.o: src/eliashberg/self_energy.o src/global.o
src/ebmb.o: src/dos.o src/eliashberg/self_energy.o src/eliashberg/self_energy_cdos.o src/global.o src/io/load.o src/io/store.o src/io/tell.o src/real_axis.o
src/eigenvalues.o: src/global.o src/tools.o
src/eliashberg/eigenvalue.o: src/eigenvalues.o src/eliashberg/self_energy.o src/global.o
src/eliashberg/eigenvalue_cdos.o: src/eigenvalues.o src/eliashberg/spectral_function.o src/global.o
src/eliashberg/self_energy.o: src/eliashberg/spectral_function.o src/global.o src/tools.o
src/eliashberg/self_energy_cdos.o: src/eliashberg/spectral_function.o src/global.o
src/eliashberg/spectral_function.o: src/global.o src/tools.o
src/formatting.o: src/global.o
src/io/load.o: src/eliashberg/spectral_function.o src/global.o src/tools.o
src/io/store.o: src/global.o
src/io/tell.o: src/formatting.o src/global.o
src/pade.o: src/global.o
src/real_axis.o: src/global.o src/pade.o src/tools.o
src/tc.o: src/eliashberg/self_energy.o src/eliashberg/self_energy_cdos.o src/formatting.o src/global.o src/io/load.o
src/tools.o: src/global.o
