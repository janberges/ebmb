compiler = gfortran
mode = validate

ifeq ($(compiler), gfortran)
  ifeq ($(mode), validate)
    options = -std=f2003 -Wall -pedantic
  else ifeq ($(mode), optimize)
    options = -O3
  endif
endif

needless = *.aux *.dat .*.lb *.log *.out *.pyc *.synctex *.synctex.gz ~temporary.* .DS_Store

# generated by makemake.py:

programs = eb_local

.PHONY: all clean cleaner

all: $(programs)

clean:
	@rm -f $(needless) arguments.mod eliashberg/constant_dos.o eliashberg/variable_dos.o eliashberg_constant_dos.mod eliashberg_variable_dos.mod global.mod global.o integration.mod integration.o intervals.mod io/arguments.o io/load.o io/store_data.o io/store_text.o io_load.mod io_store_data.mod io_store_text.mod main.o pade.mod real_axis/intervals.o real_axis/pade.o real_axis/realaxis.o realaxis.mod tc.mod tc.o

cleaner: clean
	@rm -f $(programs)

$(programs):
	@echo link $@
	@$(compiler) -o $@ $^ $(external)

%.o: %.f90
	@echo compile $*
	@$(compiler) $(options) -c $< -o $@

eb_local: eliashberg/constant_dos.o eliashberg/variable_dos.o global.o integration.o io/arguments.o io/load.o io/store_data.o io/store_text.o main.o real_axis/intervals.o real_axis/pade.o real_axis/realaxis.o tc.o

eliashberg/constant_dos.o: global.o
eliashberg/variable_dos.o: global.o
integration.o: global.o
io/load.o: global.o integration.o io/arguments.o
io/store_data.o: global.o
io/store_text.o: global.o
main.o: eliashberg/constant_dos.o eliashberg/variable_dos.o global.o io/arguments.o io/load.o io/store_data.o io/store_text.o real_axis/realaxis.o tc.o
real_axis/intervals.o: global.o
real_axis/pade.o: global.o
real_axis/realaxis.o: global.o real_axis/intervals.o real_axis/pade.o
tc.o: eliashberg/constant_dos.o eliashberg/variable_dos.o global.o
